{"version":3,"sources":["js/utils/debounce.js","js/search.js","js/index.js"],"names":["debounce","func","delay","inDebounce","context","args","arguments","clearTimeout","setTimeout","apply","Search","setVars","setEvents","selectors","searchInput","searchButton","replaceInput","replaceSingleButton","replaceAllButton","results","button","highlightedItem","document","querySelector","buttons","querySelectorAll","value","searchResults","proxy","loader","classes","resultItemTitle","resultItemBody","fetchData","bind","runSearch","getReplaceValue","singleReplace","allReplace","enableButtons","enableReplaceInput","addEventListener","searchValue","innerHTML","fetch","then","response","json","data","items","query","search","forEach","item","createElement","className","snippet","title","prepend","appendChild","catch","error","console","disabled","children"],"mappings":"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","file":"js.057708cb.js","sourceRoot":"..","sourcesContent":["export default function debounce(func, delay){\n  let inDebounce\n  return function() {\n    const context = this\n    const args = arguments\n    clearTimeout(inDebounce)\n    inDebounce = setTimeout(() =>\n      func.apply(context, args)\n    , delay)\n  }\n}","import debounce from './utils/debounce.js'\n\nexport default class Search {\n  constructor() {\n    if (!this.setVars()) return;\n\n    this.setEvents();\n  }\n\n  setVars() {\n    this.selectors = {\n      searchInput:         \"[data-search-input]\",\n      searchButton:        \"[data-search-button]\",\n      replaceInput:        \"[data-replace-input]\",\n      replaceSingleButton: \"[data-replace-single-button]\",\n      replaceAllButton:    \"[data-replace-all-button]\",\n      results:             \"[data-search-results]\",\n      button:              \".search__button\",\n      highlightedItem:     \".searchmatch\",\n    };\n\n    this.searchInput = document.querySelector(this.selectors.searchInput);\n    this.searchButton = document.querySelector(this.selectors.searchButton);\n    this.buttons = document.querySelectorAll(this.selectors.button);\n    this.replaceInput = document.querySelector(this.selectors.replaceInput);\n    this.replaceSingleButton = document.querySelector(\n      this.selectors.replaceSingleButton\n    );\n    this.replaceAllButton = document.querySelector(\n      this.selectors.replaceAllButton\n    );\n    this.results = document.querySelector(this.selectors.results);\n    this.highlightedItem = document.querySelector(this.selectors.highlightedItem);\n    this.value = '';\n    this.searchResults = [];\n\n    this.proxy = \"https://cors-anywhere.herokuapp.com/\";\n\n    this.loader = `<div class=\"loading\"></div>`;\n\n    this.classes = {\n      resultItemTitle: 'search__resultTitle',\n      resultItemBody:  'search__result',\n    }\n    return true;\n  }\n\n  setEvents() {\n    this.fetchData = this.fetchData.bind(this);\n    this.runSearch = this.runSearch.bind(this);\n    this.getReplaceValue = this.getReplaceValue.bind(this);\n    this.singleReplace = this.singleReplace.bind(this);\n    this.allReplace = this.allReplace.bind(this);\n    this.enableButtons = this.enableButtons.bind(this);\n    this.enableReplaceInput = this.enableReplaceInput.bind(this);\n\n    this.searchInput.addEventListener(\"input\", debounce(this.runSearch, 2000));\n    this.replaceInput.addEventListener(\"input\", this.getReplaceValue);\n    this.searchButton.addEventListener(\"click\", this.runSearch);\n    this.replaceSingleButton.addEventListener(\"click\", this.singleReplace);\n    this.replaceAllButton.addEventListener(\"click\", this.allReplace);\n  }\n\n  runSearch() {\n    const searchValue = this.searchInput.value;\n    this.value = searchValue;\n    if (this.value === '') return;\n    this.fetchData(this.value);\n  }\n\n  fetchData(value) {\n    this.results.innerHTML = this.loader;\n    fetch(`${this.proxy}https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&srsearch=${value}&srlimit=10`)\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        let items = data.query.search;\n        this.results.innerHTML = \"\";\n\n        items.forEach((item) => {\n          const resultItemBody = document.createElement(\"li\");\n          const resultItemTitle = document.createElement(\"h2\");\n          resultItemTitle.className = this.classes.resultItemTitle;\n          resultItemBody.className = this.classes.resultItemBody;\n          resultItemBody.innerHTML = item.snippet;\n          resultItemTitle.innerHTML = item.title;\n          resultItemBody.prepend(resultItemTitle);\n          this.results.appendChild(resultItemBody);\n          this.searchResults = this.results;\n        });\n        this.enableReplaceInput();\n      })\n      .catch((error) => {\n        this.results.innerHTML = `<p class=\"search__results search__results--error\">\n                                    Sorry no results...try again</p>`;\n        console.error(\"Error:\", error);\n      });\n\n      return this.searchResults;\n  }\n\n  getReplaceValue() {\n    this.value = this.replaceInput.value;\n    if ( this.value !== '' ) {\n      this.enableButtons();\n    }\n  }\n\n  enableButtons() {\n    this.buttons.forEach((button) => {\n      button.disabled = false;\n    });\n  }\n\n  enableReplaceInput() {\n    this.replaceInput.disabled = false;\n  }\n\n  singleReplace() {\n    this.getReplaceValue();\n    if (this.value === '') return;\n    if (!this.searchResults) return;\n    let item = this.searchResults.children[0];\n    item = item.querySelector(this.selectors.highlightedItem);\n    item.innerHTML = this.value;\n  }\n\n  allReplace() {\n    this.getReplaceValue();\n    if (this.value === '') return;\n    if (!this.searchResults) return;\n    let items = this.searchResults.querySelectorAll(this.selectors.highlightedItem);\n    items.forEach((item) => {\n      item.innerHTML = this.value;\n    });\n  }\n}\n","import '/scss/style.scss'\nimport Search from './search';\n\nnew Search();\n"]}