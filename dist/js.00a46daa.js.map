{"version":3,"sources":["js/utils/debounce.js","js/search.js","js/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["debounce","func","delay","inDebounce","context","args","arguments","clearTimeout","setTimeout","apply","Search","setVars","setEvents","selectors","searchInput","searchButton","replaceInput","replaceSingleButton","replaceAllButton","results","button","highlightedItem","document","querySelector","buttons","querySelectorAll","value","searchResults","proxy","loader","classes","resultItemTitle","resultItemBody","fetchData","bind","runSearch","getReplaceValue","singleReplace","allReplace","enableButtons","enableReplaceInput","addEventListener","searchValue","innerHTML","fetch","then","response","json","data","items","query","search","forEach","item","createElement","className","snippet","title","prepend","appendChild","catch","error","console","disabled","children","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","i","length","module"],"mappings":"AGAA,ACAA,IDAIiE,ACAAY,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;;AFAA,ACCA,ACCA,SDDSZ,ACCAa,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,MDDI,ACCAC,CDDChB,MCCM,GDDX,ACCce,EDDE,ECCE,CAACE,SAAL,EAAd;AFFF,ACEIjB,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD,ACADc,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,IAAAA,IAAI,CAACI,MAAL;AHLJ,ADAe,AGMb,ACAC,GAFD,MJJsBpF,AGMfiE,QHNM,CAAkBhE,AGM/B,IHNa,EAAwBC,KAAxB,EAA8B;AEG7C,AFFE,AGMD,IDJGQ,EFFEP,UAAJ,GEEF;AFDE,AIKA8E,EAAAA,OJLO,AIKA,CAACI,IAAR,GAAeL,IJLG,AIKC,CAACK,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCC,IAAI,CAACC,GAAL,EAA/C;AJJE,AGMJ,ACDER,EAAAA,IAAI,CAACS,CJLGrF,CGMD+D,MHNQ,EIKf,CJLkB,AIKFuB,GDClB,CHNI,EGMoB,MCDtB,CAA6BT,OAA7B,EAAsCD,IAAI,CAACW,WAA3C;AJJE,AGMF,ACDD,QJLStF,IAAI,GAAGC,SAAb;AACAC,AGMF,IHNEA,EGME,UHNU,CAACJ,UAAD,CAAZ;AACAA,AGMA,ACDJ,IJLIA,AIKAyF,MDCM,IHNI,AGMAxB,ACDA,GJLG5D,AIKA,EDCP,EAAN,ACDJ,MJL2B,CAAC;AAAA,AGOzB,GAFD,CAEE,OAAO6D,EHNLpE,CGMF,EAAY,CHNN,CAACQ,KAAL,CAAWL,OAAX,EAAoBC,IAApB,CADsB;AAAA,AGQxB,ACFJ,KJN2B,EAErBH,CGMEoE,CCFCuB,GJNkB,CAAvB,EGQW,GAAG,ACFlB,CDEmB,ECFE,GDEGxB,GAAG,CAACE,KAAV,EAAiBC,KAAjB,CAAuB,+DAAvB,CAAd;AHLD,AIID,GJXA,GIWIoB,UAAJ,EAAgB;AJHjB,AGKG,ACDA,IHZiBlF,IEab4D,OAAJ,EAAa;AFZf,AEaI,ACDH,a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","file":"js.00a46daa.js","sourceRoot":"..","sourcesContent":["export default function debounce(func, delay){\n  let inDebounce\n  return function() {\n    const context = this\n    const args = arguments\n    clearTimeout(inDebounce)\n    inDebounce = setTimeout(() =>\n      func.apply(context, args)\n    , delay)\n  }\n}","import debounce from './utils/debounce.js'\n\nexport default class Search {\n  constructor() {\n    if (!this.setVars()) return;\n\n    this.setEvents();\n  }\n\n  setVars() {\n    this.selectors = {\n      searchInput:         \"[data-search-input]\",\n      searchButton:        \"[data-search-button]\",\n      replaceInput:        \"[data-replace-input]\",\n      replaceSingleButton: \"[data-replace-single-button]\",\n      replaceAllButton:    \"[data-replace-all-button]\",\n      results:             \"[data-search-results]\",\n      button:              \".search__button\",\n      highlightedItem:     \".searchmatch\",\n    };\n\n    this.searchInput = document.querySelector(this.selectors.searchInput);\n    this.searchButton = document.querySelector(this.selectors.searchButton);\n    this.buttons = document.querySelectorAll(this.selectors.button);\n    this.replaceInput = document.querySelector(this.selectors.replaceInput);\n    this.replaceSingleButton = document.querySelector(\n      this.selectors.replaceSingleButton\n    );\n    this.replaceAllButton = document.querySelector(\n      this.selectors.replaceAllButton\n    );\n    this.results = document.querySelector(this.selectors.results);\n    this.highlightedItem = document.querySelector(this.selectors.highlightedItem);\n    this.value = '';\n    this.searchResults = [];\n\n    this.proxy = \"https://cors-anywhere.herokuapp.com/\";\n\n    this.loader = `<div class=\"loading\"></div>`;\n\n    this.classes = {\n      resultItemTitle: 'search__resultTitle',\n      resultItemBody:  'search__result',\n    }\n    return true;\n  }\n\n  setEvents() {\n    this.fetchData = this.fetchData.bind(this);\n    this.runSearch = this.runSearch.bind(this);\n    this.getReplaceValue = this.getReplaceValue.bind(this);\n    this.singleReplace = this.singleReplace.bind(this);\n    this.allReplace = this.allReplace.bind(this);\n    this.enableButtons = this.enableButtons.bind(this);\n    this.enableReplaceInput = this.enableReplaceInput.bind(this);\n\n    this.searchInput.addEventListener(\"input\", debounce(this.runSearch, 2000));\n    this.replaceInput.addEventListener(\"input\", this.getReplaceValue);\n    this.searchButton.addEventListener(\"click\", this.runSearch);\n    this.replaceSingleButton.addEventListener(\"click\", this.singleReplace);\n    this.replaceAllButton.addEventListener(\"click\", this.allReplace);\n  }\n\n  runSearch() {\n    const searchValue = this.searchInput.value;\n    this.value = searchValue;\n    if (this.value === '') return;\n    this.fetchData(this.value);\n  }\n\n  fetchData(value) {\n    this.results.innerHTML = this.loader;\n    fetch(`${this.proxy}https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&srsearch=${value}&srlimit=10`)\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        let items = data.query.search;\n        this.results.innerHTML = \"\";\n\n        items.forEach((item) => {\n          const resultItemBody = document.createElement(\"li\");\n          const resultItemTitle = document.createElement(\"h2\");\n          resultItemTitle.className = this.classes.resultItemTitle;\n          resultItemBody.className = this.classes.resultItemBody;\n          resultItemBody.innerHTML = item.snippet;\n          resultItemTitle.innerHTML = item.title;\n          resultItemBody.prepend(resultItemTitle);\n          this.results.appendChild(resultItemBody);\n          this.searchResults = this.results;\n        });\n        this.enableReplaceInput();\n      })\n      .catch((error) => {\n        this.results.innerHTML = `<p class=\"search__results search__results--error\">\n                                    Sorry no results...try again</p>`;\n        console.error(\"Error:\", error);\n      });\n\n      return this.searchResults;\n  }\n\n  getReplaceValue() {\n    this.value = this.replaceInput.value;\n    if ( this.value !== '' ) {\n      this.enableButtons();\n    }\n  }\n\n  enableButtons() {\n    this.buttons.forEach((button) => {\n      button.disabled = false;\n    });\n  }\n\n  enableReplaceInput() {\n    this.replaceInput.disabled = false;\n  }\n\n  singleReplace() {\n    this.getReplaceValue();\n    if (this.value === '') return;\n    if (!this.searchResults) return;\n    let item = this.searchResults.children[0];\n    item = item.querySelector(this.selectors.highlightedItem);\n    item.innerHTML = this.value;\n  }\n\n  allReplace() {\n    this.getReplaceValue();\n    if (this.value === '') return;\n    if (!this.searchResults) return;\n    let items = this.searchResults.querySelectorAll(this.selectors.highlightedItem);\n    items.forEach((item) => {\n      item.innerHTML = this.value;\n    });\n  }\n}\n","import '/scss/style.scss'\nimport Search from './search';\n\nnew Search();\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}